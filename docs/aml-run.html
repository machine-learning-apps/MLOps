<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link type="text/css" href="/MLOps/css/pages.css" media="all" rel="stylesheet">

    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Aml Run | Machine Learning Ops</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Aml Run" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Usage The Azure Machine Learning Run action will allow you to submit a run (Estimator, ML Pipeline, ScriptRunConfig or AutoMLConfig) to your Azure Machine Learning Workspace. To submit a run, you have to define Your python file(s) that should run remotely and 2. a) Either a runconfig YAML file (default &quot;code/train/run_config.yml&quot;), which describes your Azure Machine Learning Script Run that you want to submit. You can change the default value with the runconfig_yaml_file parameter. b) or a Pipeline YAML file (default &quot;code/train/pipeline.yml&quot;), which describes your Azure Machine Learning Pipeline that you want to submit. You can change the default value with the pipeline_yaml_file parameter. c) or a python script (default code/train/run_config.py) which includes a function (default def main(workspace):) that describes your run that you want to submit. The python script gets the workspace object injected and has to return one of the following objects: Estimator TensorFlow Estimator PyTorch Estimator Scikit Learn Estimator Chainer Estimator Pipeline or AutoMLConfig If you want to change the default values for the python script, you can specify it with the runconfig_python_file and runconfig_python_function_name parameters. This action requires an AML workspace to be created or attached to via the aml-workspace action and some compute resources to be available, which can be managed via the aml-compute action. Template repositories This action is one in a series of actions that can be used to setup an ML Ops process. Examples of these can be found at Simple example: ml-template-azure and Comprehensive example: aml-template. Example workflow name: My Workflow on: [push, pull_request] jobs: build: runs-on: ubuntu-latest steps: # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it - name: Check Out Repository id: checkout_repository uses: actions/checkout@v2 # AML Workspace Action - uses: Azure/aml-workspace id: aml_workspace with: azure_credentials: $ # AML Run Action - uses: Azure/aml-run id: aml_run with: # required inputs as secrets azure_credentials: $ # optional parameters_file: &quot;run.json&quot; Inputs Input Required Default Description azure_credentials x - Output of az ad sp create-for-rbac --name &lt;your-sp-name&gt; --role contributor --scopes /subscriptions/&lt;your-subscriptionId&gt;/resourceGroups/&lt;your-rg&gt; --sdk-auth. This should be stored in your secrets parameters_file   &quot;compute.json&quot; JSON file in the .cloud/.azure folder specifying your Azure Machine Learning compute target details. Azure Credentials Azure credentials are required to connect to your Azure Machine Learning Workspace. These may have been created for an action you are already using in your repository, if so, you can skip the steps below. Install the Azure CLI on your computer or use the Cloud CLI and execute the following command to generate the required credentials: # Replace {service-principal-name}, {subscription-id} and {resource-group} with your Azure subscription id and resource group name and any name for your service principle az ad sp create-for-rbac --name {service-principal-name} \ --role contributor \ --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group} \ --sdk-auth This will generate the following JSON output: { &quot;clientId&quot;: &quot;&lt;GUID&gt;&quot;, &quot;clientSecret&quot;: &quot;&lt;GUID&gt;&quot;, &quot;subscriptionId&quot;: &quot;&lt;GUID&gt;&quot;, &quot;tenantId&quot;: &quot;&lt;GUID&gt;&quot;, (...) } Add this JSON output as a secret with the name AZURE_CREDENTIALS in your GitHub repository. Parameter File The action tries to load a JSON file in the .cloud/.azure folder in your repository, which specifies details of your Azure Machine Learning Run. By default, the action is looking for a file with the name &quot;run.json&quot;. If your JSON file has a different name, you can specify it with this parameter. Note that none of these values are required and in the absence, defaults will be created with a combination of the repo name and branch name. A sample file can be found in this repository in the folder .cloud/.azure. The JSON file can include the following parameters: Parameter Name Required Allowed Values Default Description experiment_name   str - Name of your experiment in AML, which must be 3-36 characters, start with a letter or a number, and can only contain letters, numbers, underscores, and dashes. tags   dict: {“&quot;: &quot;&quot;, ...} null Tags to be added to the submitted run. wait_for_completion   bool true Indicates whether the action will wait for completion of the run runconfig_python_file   str &quot;code/train/run_config.py&quot; Path to the python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. runconfig_python_function_name   str &quot;main&quot; Name of the function in your python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. The function gets the workspace object passed as an argument. runconfig_yaml_file   str &quot;code/train/run_config.yml&quot; Name of your runconfig YAML file. pipeline_yaml_file   str &quot;code/train/pipeline.yml&quot; Name of your pipeline YAML file. pipeline_publish   bool: true, false false Indicates whether the action will publish the pipeline after submitting it to Azure Machine Learning. This only works if you submitted a pipeline. pipeline_name   str - The name of the published pipeline. pipeline_version   str null The version of the published pipeline. pipeline_continue_on_step_failure   bool false Whether to continue execution of other steps in the PipelineRun if a step fails. Outputs Output Description experiment_name Name of the experiment of the run run_id ID of the run run_url URL to the run in the Azure Machine Learning Studio run_metrics Metrics of the run (will only be provided if wait_for_completion is set to True) run_metrics_markdown Metrics of the run formatted as markdown table (will only be provided if wait_for_completion is set to True) published_pipeline_id Id of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) published_pipeline_status Status of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) published_pipeline_endpoint Endpoint of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) Other Azure Machine Learning Actions aml-workspace - Connects to or creates a new workspace aml-compute - Connects to or creates a new compute target in Azure Machine Learning aml-run - Submits a ScriptRun, an Estimator or a Pipeline to Azure Machine Learning aml-registermodel - Registers a model to Azure Machine Learning aml-deploy - Deploys a model and creates an endpoint for the model Contributing This project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.opensource.microsoft.com. When you submit a pull request, a CLA bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA. This project has adopted the Microsoft Open Source Code of Conduct. For more information see the Code of Conduct FAQ or contact opencode@microsoft.com with any additional questions or comments." />
<meta property="og:description" content="Usage The Azure Machine Learning Run action will allow you to submit a run (Estimator, ML Pipeline, ScriptRunConfig or AutoMLConfig) to your Azure Machine Learning Workspace. To submit a run, you have to define Your python file(s) that should run remotely and 2. a) Either a runconfig YAML file (default &quot;code/train/run_config.yml&quot;), which describes your Azure Machine Learning Script Run that you want to submit. You can change the default value with the runconfig_yaml_file parameter. b) or a Pipeline YAML file (default &quot;code/train/pipeline.yml&quot;), which describes your Azure Machine Learning Pipeline that you want to submit. You can change the default value with the pipeline_yaml_file parameter. c) or a python script (default code/train/run_config.py) which includes a function (default def main(workspace):) that describes your run that you want to submit. The python script gets the workspace object injected and has to return one of the following objects: Estimator TensorFlow Estimator PyTorch Estimator Scikit Learn Estimator Chainer Estimator Pipeline or AutoMLConfig If you want to change the default values for the python script, you can specify it with the runconfig_python_file and runconfig_python_function_name parameters. This action requires an AML workspace to be created or attached to via the aml-workspace action and some compute resources to be available, which can be managed via the aml-compute action. Template repositories This action is one in a series of actions that can be used to setup an ML Ops process. Examples of these can be found at Simple example: ml-template-azure and Comprehensive example: aml-template. Example workflow name: My Workflow on: [push, pull_request] jobs: build: runs-on: ubuntu-latest steps: # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it - name: Check Out Repository id: checkout_repository uses: actions/checkout@v2 # AML Workspace Action - uses: Azure/aml-workspace id: aml_workspace with: azure_credentials: $ # AML Run Action - uses: Azure/aml-run id: aml_run with: # required inputs as secrets azure_credentials: $ # optional parameters_file: &quot;run.json&quot; Inputs Input Required Default Description azure_credentials x - Output of az ad sp create-for-rbac --name &lt;your-sp-name&gt; --role contributor --scopes /subscriptions/&lt;your-subscriptionId&gt;/resourceGroups/&lt;your-rg&gt; --sdk-auth. This should be stored in your secrets parameters_file   &quot;compute.json&quot; JSON file in the .cloud/.azure folder specifying your Azure Machine Learning compute target details. Azure Credentials Azure credentials are required to connect to your Azure Machine Learning Workspace. These may have been created for an action you are already using in your repository, if so, you can skip the steps below. Install the Azure CLI on your computer or use the Cloud CLI and execute the following command to generate the required credentials: # Replace {service-principal-name}, {subscription-id} and {resource-group} with your Azure subscription id and resource group name and any name for your service principle az ad sp create-for-rbac --name {service-principal-name} \ --role contributor \ --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group} \ --sdk-auth This will generate the following JSON output: { &quot;clientId&quot;: &quot;&lt;GUID&gt;&quot;, &quot;clientSecret&quot;: &quot;&lt;GUID&gt;&quot;, &quot;subscriptionId&quot;: &quot;&lt;GUID&gt;&quot;, &quot;tenantId&quot;: &quot;&lt;GUID&gt;&quot;, (...) } Add this JSON output as a secret with the name AZURE_CREDENTIALS in your GitHub repository. Parameter File The action tries to load a JSON file in the .cloud/.azure folder in your repository, which specifies details of your Azure Machine Learning Run. By default, the action is looking for a file with the name &quot;run.json&quot;. If your JSON file has a different name, you can specify it with this parameter. Note that none of these values are required and in the absence, defaults will be created with a combination of the repo name and branch name. A sample file can be found in this repository in the folder .cloud/.azure. The JSON file can include the following parameters: Parameter Name Required Allowed Values Default Description experiment_name   str - Name of your experiment in AML, which must be 3-36 characters, start with a letter or a number, and can only contain letters, numbers, underscores, and dashes. tags   dict: {“&quot;: &quot;&quot;, ...} null Tags to be added to the submitted run. wait_for_completion   bool true Indicates whether the action will wait for completion of the run runconfig_python_file   str &quot;code/train/run_config.py&quot; Path to the python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. runconfig_python_function_name   str &quot;main&quot; Name of the function in your python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. The function gets the workspace object passed as an argument. runconfig_yaml_file   str &quot;code/train/run_config.yml&quot; Name of your runconfig YAML file. pipeline_yaml_file   str &quot;code/train/pipeline.yml&quot; Name of your pipeline YAML file. pipeline_publish   bool: true, false false Indicates whether the action will publish the pipeline after submitting it to Azure Machine Learning. This only works if you submitted a pipeline. pipeline_name   str - The name of the published pipeline. pipeline_version   str null The version of the published pipeline. pipeline_continue_on_step_failure   bool false Whether to continue execution of other steps in the PipelineRun if a step fails. Outputs Output Description experiment_name Name of the experiment of the run run_id ID of the run run_url URL to the run in the Azure Machine Learning Studio run_metrics Metrics of the run (will only be provided if wait_for_completion is set to True) run_metrics_markdown Metrics of the run formatted as markdown table (will only be provided if wait_for_completion is set to True) published_pipeline_id Id of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) published_pipeline_status Status of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) published_pipeline_endpoint Endpoint of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) Other Azure Machine Learning Actions aml-workspace - Connects to or creates a new workspace aml-compute - Connects to or creates a new compute target in Azure Machine Learning aml-run - Submits a ScriptRun, an Estimator or a Pipeline to Azure Machine Learning aml-registermodel - Registers a model to Azure Machine Learning aml-deploy - Deploys a model and creates an endpoint for the model Contributing This project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.opensource.microsoft.com. When you submit a pull request, a CLA bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA. This project has adopted the Microsoft Open Source Code of Conduct. For more information see the Code of Conduct FAQ or contact opencode@microsoft.com with any additional questions or comments." />
<link rel="canonical" href="https://machine-learning-apps.github.io/MLOps/docs/aml-run.html" />
<meta property="og:url" content="https://machine-learning-apps.github.io/MLOps/docs/aml-run.html" />
<meta property="og:site_name" content="Machine Learning Ops" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-19T09:22:14-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Aml Run" />
<meta name="twitter:site" content="@github" />
<script type="application/ld+json">
{"description":"Usage The Azure Machine Learning Run action will allow you to submit a run (Estimator, ML Pipeline, ScriptRunConfig or AutoMLConfig) to your Azure Machine Learning Workspace. To submit a run, you have to define Your python file(s) that should run remotely and 2. a) Either a runconfig YAML file (default &quot;code/train/run_config.yml&quot;), which describes your Azure Machine Learning Script Run that you want to submit. You can change the default value with the runconfig_yaml_file parameter. b) or a Pipeline YAML file (default &quot;code/train/pipeline.yml&quot;), which describes your Azure Machine Learning Pipeline that you want to submit. You can change the default value with the pipeline_yaml_file parameter. c) or a python script (default code/train/run_config.py) which includes a function (default def main(workspace):) that describes your run that you want to submit. The python script gets the workspace object injected and has to return one of the following objects: Estimator TensorFlow Estimator PyTorch Estimator Scikit Learn Estimator Chainer Estimator Pipeline or AutoMLConfig If you want to change the default values for the python script, you can specify it with the runconfig_python_file and runconfig_python_function_name parameters. This action requires an AML workspace to be created or attached to via the aml-workspace action and some compute resources to be available, which can be managed via the aml-compute action. Template repositories This action is one in a series of actions that can be used to setup an ML Ops process. Examples of these can be found at Simple example: ml-template-azure and Comprehensive example: aml-template. Example workflow name: My Workflow on: [push, pull_request] jobs: build: runs-on: ubuntu-latest steps: # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it - name: Check Out Repository id: checkout_repository uses: actions/checkout@v2 # AML Workspace Action - uses: Azure/aml-workspace id: aml_workspace with: azure_credentials: $ # AML Run Action - uses: Azure/aml-run id: aml_run with: # required inputs as secrets azure_credentials: $ # optional parameters_file: &quot;run.json&quot; Inputs Input Required Default Description azure_credentials x - Output of az ad sp create-for-rbac --name &lt;your-sp-name&gt; --role contributor --scopes /subscriptions/&lt;your-subscriptionId&gt;/resourceGroups/&lt;your-rg&gt; --sdk-auth. This should be stored in your secrets parameters_file   &quot;compute.json&quot; JSON file in the .cloud/.azure folder specifying your Azure Machine Learning compute target details. Azure Credentials Azure credentials are required to connect to your Azure Machine Learning Workspace. These may have been created for an action you are already using in your repository, if so, you can skip the steps below. Install the Azure CLI on your computer or use the Cloud CLI and execute the following command to generate the required credentials: # Replace {service-principal-name}, {subscription-id} and {resource-group} with your Azure subscription id and resource group name and any name for your service principle az ad sp create-for-rbac --name {service-principal-name} \\ --role contributor \\ --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group} \\ --sdk-auth This will generate the following JSON output: { &quot;clientId&quot;: &quot;&lt;GUID&gt;&quot;, &quot;clientSecret&quot;: &quot;&lt;GUID&gt;&quot;, &quot;subscriptionId&quot;: &quot;&lt;GUID&gt;&quot;, &quot;tenantId&quot;: &quot;&lt;GUID&gt;&quot;, (...) } Add this JSON output as a secret with the name AZURE_CREDENTIALS in your GitHub repository. Parameter File The action tries to load a JSON file in the .cloud/.azure folder in your repository, which specifies details of your Azure Machine Learning Run. By default, the action is looking for a file with the name &quot;run.json&quot;. If your JSON file has a different name, you can specify it with this parameter. Note that none of these values are required and in the absence, defaults will be created with a combination of the repo name and branch name. A sample file can be found in this repository in the folder .cloud/.azure. The JSON file can include the following parameters: Parameter Name Required Allowed Values Default Description experiment_name   str - Name of your experiment in AML, which must be 3-36 characters, start with a letter or a number, and can only contain letters, numbers, underscores, and dashes. tags   dict: {“&quot;: &quot;&quot;, ...} null Tags to be added to the submitted run. wait_for_completion   bool true Indicates whether the action will wait for completion of the run runconfig_python_file   str &quot;code/train/run_config.py&quot; Path to the python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. runconfig_python_function_name   str &quot;main&quot; Name of the function in your python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. The function gets the workspace object passed as an argument. runconfig_yaml_file   str &quot;code/train/run_config.yml&quot; Name of your runconfig YAML file. pipeline_yaml_file   str &quot;code/train/pipeline.yml&quot; Name of your pipeline YAML file. pipeline_publish   bool: true, false false Indicates whether the action will publish the pipeline after submitting it to Azure Machine Learning. This only works if you submitted a pipeline. pipeline_name   str - The name of the published pipeline. pipeline_version   str null The version of the published pipeline. pipeline_continue_on_step_failure   bool false Whether to continue execution of other steps in the PipelineRun if a step fails. Outputs Output Description experiment_name Name of the experiment of the run run_id ID of the run run_url URL to the run in the Azure Machine Learning Studio run_metrics Metrics of the run (will only be provided if wait_for_completion is set to True) run_metrics_markdown Metrics of the run formatted as markdown table (will only be provided if wait_for_completion is set to True) published_pipeline_id Id of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) published_pipeline_status Status of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) published_pipeline_endpoint Endpoint of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True) Other Azure Machine Learning Actions aml-workspace - Connects to or creates a new workspace aml-compute - Connects to or creates a new compute target in Azure Machine Learning aml-run - Submits a ScriptRun, an Estimator or a Pipeline to Azure Machine Learning aml-registermodel - Registers a model to Azure Machine Learning aml-deploy - Deploys a model and creates an endpoint for the model Contributing This project welcomes contributions and suggestions. Most contributions require you to agree to a Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us the rights to use your contribution. For details, visit https://cla.opensource.microsoft.com. When you submit a pull request, a CLA bot will automatically determine whether you need to provide a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions provided by the bot. You will only need to do this once across all repos using our CLA. This project has adopted the Microsoft Open Source Code of Conduct. For more information see the Code of Conduct FAQ or contact opencode@microsoft.com with any additional questions or comments.","headline":"Aml Run","dateModified":"2020-04-19T09:22:14-05:00","datePublished":"2020-04-19T09:22:14-05:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://machine-learning-apps.github.io/MLOps/docs/aml-run.html"},"url":"https://machine-learning-apps.github.io/MLOps/docs/aml-run.html","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body class="document /docs/aml-run">

<div class="topnav">
    <a href="/MLOps/">MLOps</a>
    <a href="/MLOps/actions">Actions</a>
    <a href="/MLOps/templates">Templates</a>
    <a href="/MLOps/docs">Docs</a>
    <a href="https://github.com/machine-learning-apps/MLOps" class="help-link">MLOps Repository</a>
  </div>

<section id="hero-spot" class="hero-spot">
    <a href="/"><img src="/MLOps/images/ml_apps.png" alt="ML Ops" class="logo" /></a>

<h1 class="title">Aml Run</h1>

</section>

<section class="content">

<h2 id="usage">Usage</h2>

<p>The Azure Machine Learning Run action will allow you to submit a run (Estimator, ML Pipeline, ScriptRunConfig or AutoMLConfig) to your Azure Machine Learning Workspace. To submit a run, you have to define</p>
<ol>
  <li>
    <p>Your python file(s) that should run remotely and
2.
 a) Either a runconfig YAML file (default <code class="language-plaintext highlighter-rouge">"code/train/run_config.yml"</code>), which describes your Azure Machine Learning Script Run that you want to submit. You can change the default value with the <code class="language-plaintext highlighter-rouge">runconfig_yaml_file</code> parameter.</p>

    <p>b) or a Pipeline YAML file (default <code class="language-plaintext highlighter-rouge">"code/train/pipeline.yml"</code>), which describes your Azure Machine Learning Pipeline that you want to submit. You can change the default value with the <code class="language-plaintext highlighter-rouge">pipeline_yaml_file</code> parameter.</p>

    <p>c) or a python script (default <code class="language-plaintext highlighter-rouge">code/train/run_config.py</code>) which includes a function (default <code class="language-plaintext highlighter-rouge">def main(workspace):</code>) that describes your run that you want to submit. The python script gets the <a href="https://docs.microsoft.com/en-us/python/api/azureml-core/azureml.core.workspace(class)?view=azure-ml-py">workspace object</a> injected and has to return one of the following objects:</p>
    <ul>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-train-core/azureml.train.estimator.estimator?view=azure-ml-py">Estimator</a></li>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-train-core/azureml.train.dnn.tensorflow?view=azure-ml-py">TensorFlow Estimator</a></li>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-train-core/azureml.train.dnn.pytorch?view=azure-ml-py">PyTorch Estimator</a></li>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-train-core/azureml.train.sklearn.sklearn?view=azure-ml-py">Scikit Learn Estimator</a></li>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-train-core/azureml.train.dnn.chainer?view=azure-ml-py">Chainer Estimator</a></li>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-pipeline-core/azureml.pipeline.core.pipeline%28class%29?view=azure-ml-py">Pipeline</a> or</li>
      <li><a href="https://docs.microsoft.com/en-us/python/api/azureml-train-automl-client/azureml.train.automl.automlconfig.automlconfig?view=azure-ml-py">AutoMLConfig</a></li>
    </ul>

    <p>If you want to change the default values for the python script, you can specify it with the <code class="language-plaintext highlighter-rouge">runconfig_python_file</code> and <code class="language-plaintext highlighter-rouge">runconfig_python_function_name</code> parameters.</p>
  </li>
</ol>

<p>This action requires an AML workspace to be created or attached to via the <a href="https://github.com/Azure/aml-workspace">aml-workspace</a> action and some compute resources to be available, which can be managed via the <a href="https://github.com/Azure/aml-compute">aml-compute</a> action.</p>

<h2 id="template-repositories">Template repositories</h2>

<p>This action is one in a series of actions that can be used to setup an ML Ops process. Examples of these can be found at</p>
<ol>
  <li>Simple example: <a href="https://github.com/machine-learning-apps/ml-template-azure">ml-template-azure</a> and</li>
  <li>Comprehensive example: <a href="https://github.com/Azure/aml-template">aml-template</a>.</li>
</ol>

<h3 id="example-workflow">Example workflow</h3>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">My Workflow</span>
<span class="na">on</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">push</span><span class="pi">,</span> <span class="nv">pull_request</span><span class="pi">]</span>
<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
    <span class="c1"># Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it</span>
    <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Check Out Repository</span>
      <span class="na">id</span><span class="pi">:</span> <span class="s">checkout_repository</span>
      <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>

    <span class="c1"># AML Workspace Action</span>
    <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">Azure/aml-workspace</span>
      <span class="na">id</span><span class="pi">:</span> <span class="s">aml_workspace</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="na">azure_credentials</span><span class="pi">:</span> <span class="s">$</span>

    <span class="c1"># AML Run Action</span>
    <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">Azure/aml-run</span>
      <span class="na">id</span><span class="pi">:</span> <span class="s">aml_run</span>
      <span class="na">with</span><span class="pi">:</span>
        <span class="c1"># required inputs as secrets</span>
        <span class="na">azure_credentials</span><span class="pi">:</span> <span class="s">$</span>
        <span class="c1"># optional</span>
        <span class="na">parameters_file</span><span class="pi">:</span> <span class="s2">"</span><span class="s">run.json"</span>
</code></pre></div></div>

<h3 id="inputs">Inputs</h3>

<table>
  <thead>
    <tr>
      <th>Input</th>
      <th>Required</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>azure_credentials</td>
      <td>x</td>
      <td>-</td>
      <td>Output of <code class="language-plaintext highlighter-rouge">az ad sp create-for-rbac --name &lt;your-sp-name&gt; --role contributor --scopes /subscriptions/&lt;your-subscriptionId&gt;/resourceGroups/&lt;your-rg&gt; --sdk-auth</code>. This should be stored in your secrets</td>
    </tr>
    <tr>
      <td>parameters_file</td>
      <td> </td>
      <td><code class="language-plaintext highlighter-rouge">"compute.json"</code></td>
      <td>JSON file in the <code class="language-plaintext highlighter-rouge">.cloud/.azure</code> folder specifying your Azure Machine Learning compute target details.</td>
    </tr>
  </tbody>
</table>

<h4 id="azure-credentials">Azure Credentials</h4>

<p>Azure credentials are required to connect to your Azure Machine Learning Workspace. These may have been created for an action you are already using in your repository, if so, you can skip the steps below.</p>

<p>Install the <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest">Azure CLI</a> on your computer or use the Cloud CLI and execute the following command to generate the required credentials:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Replace {service-principal-name}, {subscription-id} and {resource-group} with your Azure subscription id and resource group name and any name for your service principle</span>
az ad sp create-for-rbac <span class="nt">--name</span> <span class="o">{</span>service-principal-name<span class="o">}</span> <span class="se">\</span>
                         <span class="nt">--role</span> contributor <span class="se">\</span>
                         <span class="nt">--scopes</span> /subscriptions/<span class="o">{</span>subscription-id<span class="o">}</span>/resourceGroups/<span class="o">{</span>resource-group<span class="o">}</span> <span class="se">\</span>
                         <span class="nt">--sdk-auth</span>
</code></pre></div></div>

<p>This will generate the following JSON output:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
  <span class="s2">"clientId"</span>: <span class="s2">"&lt;GUID&gt;"</span>,
  <span class="s2">"clientSecret"</span>: <span class="s2">"&lt;GUID&gt;"</span>,
  <span class="s2">"subscriptionId"</span>: <span class="s2">"&lt;GUID&gt;"</span>,
  <span class="s2">"tenantId"</span>: <span class="s2">"&lt;GUID&gt;"</span>,
  <span class="o">(</span>...<span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Add this JSON output as <a href="https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets#creating-encrypted-secrets">a secret</a> with the name <code class="language-plaintext highlighter-rouge">AZURE_CREDENTIALS</code> in your GitHub repository.</p>

<h4 id="parameter-file">Parameter File</h4>

<p>The action tries to load a JSON file in the <code class="language-plaintext highlighter-rouge">.cloud/.azure</code> folder in your repository, which specifies details of your Azure Machine Learning Run. By default, the action is looking for a file with the name <code class="language-plaintext highlighter-rouge">"run.json"</code>. If your JSON file has a different name, you can specify it with this parameter. Note that none of these values are required and in the absence, defaults will be created with a combination of the repo name and branch name.</p>

<p>A sample file can be found in this repository in the folder <code class="language-plaintext highlighter-rouge">.cloud/.azure</code>. The JSON file can include the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Parameter Name</th>
      <th>Required</th>
      <th>Allowed Values</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>experiment_name</td>
      <td> </td>
      <td>str</td>
      <td><REPOSITORY_NAME>-<BRANCH_NAME></BRANCH_NAME></REPOSITORY_NAME></td>
      <td>Name of your experiment in AML, which must be 3-36 characters, start with a letter or a number, and can only contain letters, numbers, underscores, and dashes.</td>
    </tr>
    <tr>
      <td>tags</td>
      <td> </td>
      <td>dict: {“<your-run-tag-key>": "<your-run-tag-value>", ...}</your-run-tag-value></your-run-tag-key></td>
      <td>null</td>
      <td>Tags to be added to the submitted run.</td>
    </tr>
    <tr>
      <td>wait_for_completion</td>
      <td> </td>
      <td>bool</td>
      <td>true</td>
      <td>Indicates whether the action will wait for completion of the run</td>
    </tr>
    <tr>
      <td>runconfig_python_file</td>
      <td> </td>
      <td>str</td>
      <td><code class="language-plaintext highlighter-rouge">"code/train/run_config.py"</code></td>
      <td>Path to the python script in your repository  in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object.</td>
    </tr>
    <tr>
      <td>runconfig_python_function_name</td>
      <td> </td>
      <td>str</td>
      <td><code class="language-plaintext highlighter-rouge">"main"</code></td>
      <td>Name of the function in your python script in your repository in which you define your run and return an Estimator, Pipeline, AutoMLConfig or ScriptRunConfig object. The function gets the workspace object passed as an argument.</td>
    </tr>
    <tr>
      <td>runconfig_yaml_file</td>
      <td> </td>
      <td>str</td>
      <td><code class="language-plaintext highlighter-rouge">"code/train/run_config.yml"</code></td>
      <td>Name of your runconfig YAML file.</td>
    </tr>
    <tr>
      <td>pipeline_yaml_file</td>
      <td> </td>
      <td>str</td>
      <td><code class="language-plaintext highlighter-rouge">"code/train/pipeline.yml"</code></td>
      <td>Name of your pipeline YAML file.</td>
    </tr>
    <tr>
      <td>pipeline_publish</td>
      <td> </td>
      <td>bool: true, false</td>
      <td>false</td>
      <td>Indicates whether the action will publish the pipeline after submitting it to Azure Machine Learning. This only works if you submitted a pipeline.</td>
    </tr>
    <tr>
      <td>pipeline_name</td>
      <td> </td>
      <td>str</td>
      <td><REPOSITORY_NAME>-<BRANCH_NAME></BRANCH_NAME></REPOSITORY_NAME></td>
      <td>The name of the published pipeline.</td>
    </tr>
    <tr>
      <td>pipeline_version</td>
      <td> </td>
      <td>str</td>
      <td>null</td>
      <td>The version of the published pipeline.</td>
    </tr>
    <tr>
      <td>pipeline_continue_on_step_failure</td>
      <td> </td>
      <td>bool</td>
      <td>false</td>
      <td>Whether to continue execution of other steps in the PipelineRun if a step fails.</td>
    </tr>
  </tbody>
</table>

<h3 id="outputs">Outputs</h3>

<table>
  <thead>
    <tr>
      <th>Output</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>experiment_name</td>
      <td>Name of the experiment of the run</td>
    </tr>
    <tr>
      <td>run_id</td>
      <td>ID of the run</td>
    </tr>
    <tr>
      <td>run_url</td>
      <td>URL to the run in the Azure Machine Learning Studio</td>
    </tr>
    <tr>
      <td>run_metrics</td>
      <td>Metrics of the run (will only be provided if wait_for_completion is set to True)</td>
    </tr>
    <tr>
      <td>run_metrics_markdown</td>
      <td>Metrics of the run formatted as markdown table (will only be provided if wait_for_completion is set to True)</td>
    </tr>
    <tr>
      <td>published_pipeline_id</td>
      <td>Id of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True)</td>
    </tr>
    <tr>
      <td>published_pipeline_status</td>
      <td>Status of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True)</td>
    </tr>
    <tr>
      <td>published_pipeline_endpoint</td>
      <td>Endpoint of the published pipeline (will only be provided if you submitted a pipeline and pipeline_publish is set to True)</td>
    </tr>
  </tbody>
</table>

<h3 id="other-azure-machine-learning-actions">Other Azure Machine Learning Actions</h3>

<ul>
  <li><a href="https://github.com/Azure/aml-workspace">aml-workspace</a> - Connects to or creates a new workspace</li>
  <li><a href="https://github.com/Azure/aml-compute">aml-compute</a> - Connects to or creates a new compute target in Azure Machine Learning</li>
  <li><a href="https://github.com/Azure/aml-run">aml-run</a> - Submits a ScriptRun, an Estimator or a Pipeline to Azure Machine Learning</li>
  <li><a href="https://github.com/Azure/aml-registermodel">aml-registermodel</a> - Registers a model to Azure Machine Learning</li>
  <li><a href="https://github.com/Azure/aml-deploy">aml-deploy</a> - Deploys a model and creates an endpoint for the model</li>
</ul>

<h3 id="contributing">Contributing</h3>

<p>This project welcomes contributions and suggestions.  Most contributions require you to agree to a
Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us
the rights to use your contribution. For details, visit https://cla.opensource.microsoft.com.</p>

<p>When you submit a pull request, a CLA bot will automatically determine whether you need to provide
a CLA and decorate the PR appropriately (e.g., status check, comment). Simply follow the instructions
provided by the bot. You will only need to do this once across all repos using our CLA.</p>

<p>This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>.
For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or
contact <a href="mailto:opencode@microsoft.com">opencode@microsoft.com</a> with any additional questions or comments.</p>


</section>

<footer class="page-footer">
  <ul class="site-footer-links right">
    <li><a href="https://status.github.com/">Status</a></li>
    <li><a href="https://developer.github.com">API</a></li>
    <li><a href="https://training.github.com">Training</a></li>
    <li><a href="https://shop.github.com">Shop</a></li>
    <li><a href="https://github.com/blog">Blog</a></li>
    <li><a href="https://github.com/about">About</a></li>
  </ul>

  <a href="/">
    <span class="mega-octicon octicon-mark-github"></span>
  </a>

  <ul class="site-footer-links">
    <li>&copy; 2020 <span>GitHub</span>, Inc.</li>
    <li><a href="https://github.com/site/terms">Terms</a></li>
    <li><a href="https://github.com/site/privacy">Privacy</a></li>
    <li><a href="https://github.com/security">Security</a></li>
    <li><a href="https://github.com/contact">Contact</a></li>
  </ul>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3769691-40', 'github.com');
  ga('send', 'pageview');
</script>

</body>
</html>


